{"projectName":"mirror","datapackDirectory":null,"resourcesPackDirectory":null,"offuscate":true,"isLibrary":true,"description":"Made With BluePhoenix","files":[{"name":"import","content":"import tools","index":0},{"name":"mirror_var","content":"package parkour_mirror\n\nINT Mirror_ID\nFLOAT Center_X, Center_Y, Center_Z\nBOOL AxisX, AxisY, AxisZ\nint mirror_id = 0\nbool mirrorOn = true","index":0},{"name":"mirror_display","content":"package parkour_mirror\n\nINT walkD = minecraft.custom:minecraft.walk_one_cm\nINT runD = minecraft.custom:minecraft.sprint_one_cm\nINT sneakT = minecraft.custom:minecraft.sneak_time\n\nbool isWalking\nbool isSneaking\n\nINT WalkStep\n\ndef getStat(){\n    with(@a,true,mirror_id == Mirror_ID){\n        isWalking = false\n        if (walkD > 0){\n            isWalking = true\n        }\n        if (runD > 0){\n            isWalking = true\n        }\n        \n        isSneaking = false\n        if (sneakT > 0){\n            isSneaking = true\n        }\n    }\n}\n\ndef lazy setAni(int $i){\n/data merge entity @s {ArmorItems: [{}, {}, {}, {id: \"minecraft:diamond_hoe\", Count: 1b, tag: {CustomModelData: $i}}]}\n}\n\ndef animate(){\n    getStat()\n    if (!isWalking && !isSneaking){\n        setAni(1)\n    }\n    if (WalkStep > 0){\n        isWalking = true\n    }\n    if (isWalking){\n        WalkStep++\n        WalkStep %= 8\n        switch(WalkStep){\n            0 -> setAni(1)\n            1 -> setAni(2)\n            2 -> setAni(3)\n            3 -> setAni(2)\n            4 -> setAni(1)\n            5 -> setAni(4)\n            6 -> setAni(5)\n            7 -> setAni(4)\n        }\n    }\n    if (isSneaking){\n        setAni(6)\n    }\n}\n\ndef clearStat(){\n    with(@a){\n        runD = 0\n        walkD = 0\n        sneakT = 0\n    }\n}","index":0},{"name":"mirror","content":"package parkour_mirror\n\ndef mirrorStart(){\n    mirror_id ++\n}\n\ndef createMirror(bool mx, bool my, bool mz, float cx, float cy, float cz){\n    float x, y, z\n    x = @s.x\n    y = @s.y\n    z = @s.z\n    float nx, ny, nz\n    \n    if (mx){\n        nx = cx - x + cx\n    }\n    if (!mx){\n        nx = x\n    }\n    \n    if (my){\n        ny = cy - y + cy\n        ny -= 3\n    }\n    if (!my){\n        ny = y\n    }\n    \n    if (mz){\n        nz = cz - z + cz\n    }\n    if (!mz){\n        nz = z\n    }\n    \n    def smm(){\n        if (my){\n            /summon armor_stand ~ ~ ~ {Marker:1,Tags:[\"trg2\",\"__mirror__\"],NoGravity:1,Pose:{Head:[180f,180f,0f]},ArmorItems: [{}, {}, {}, {id: \"minecraft:diamond_hoe\", Count: 1b, tag: {CustomModelData: 1}}],Invisible:1}\n        }\n        if (!my){\n            /summon armor_stand ~ ~ ~ {Marker:1,Tags:[\"trg2\",\"__mirror__\"],NoGravity:1,ArmorItems: [{}, {}, {}, {id: \"minecraft:diamond_hoe\", Count: 1b, tag: {CustomModelData: 1}}],Invisible:1}\n        }\n    }\n    tools.locatedAt(nx, ny, nz, smm)\n    \n    Mirror_ID = mirror_id\n    with(@e[tag=trg2]){\n        Mirror_ID = mirror_id\n        Center_X = cx\n        Center_Y = cy\n        Center_Z = cz\n        AxisX = mx\n        AxisY = my\n        AxisZ = mz\n        untag(@s,trg2)\n    }\n}\nalias newMirror as createMirror\n\ndef main(){\n    if (mirrorOn){\n        with(@e[tag=__mirror__]){\n            float x, y, z, u, v\n            float nx, ny, nz, nu, nv\n            mirror_id = Mirror_ID\n            with(@a,true,mirror_id == Mirror_ID){\n                x = @s.x\n                y = @s.y\n                z = @s.z\n                u = @s.rotation_x\n                v = @s.rotation_y\n            }\n            nu = u\n            nv = v\n            if (AxisX){\n                nx = Center_X - x + Center_X\n                nu = -u\n            }\n            if (!AxisX){\n                nx = x\n            }\n            \n            if (AxisY){\n                ny = Center_Y - y + Center_Y\n                ny -= 3\n                nv = -v\n            }\n            if (!AxisY){\n                ny = y\n            }\n            \n            if (AxisZ){\n                nz = Center_Z - z + Center_Z\n                nu = 180 - u\n            }\n            if (!AxisZ){\n                nz = z\n            }\n            //tellraw(@a, nx, \"-\",ny,\"-\", nz,\"/\",x,\"-\",y,\"-\",z)\n            @s.x = nx\n            @s.y = ny\n            @s.z = nz\n            @s.rotation_x = nu\n            @s.rotation_y = nv\n            animate()\n        }\n    }\n    clearStat()\n}\n\ndef stopMirror(){\n    mirrorOn = false\n}\n\ndef continueMirror(){\n    mirrorOn = true\n}\n\ndef clearMirror(){\n    kill(@e[tag=__mirror__])\n    mirror_id = 0\n}\n\ndef clearOwned(){\n    int id = Mirror_ID\n    with(@e[tag=__mirror__],false,id == Mirror_ID){\n        kill(@s)\n    }\n}","index":0}],"resources":[],"TagsList":{"blocks":{},"functions":{}},"mcTagsList":{"blocks":{},"functions":{"load":{"values":["load"]},"tick":{"values":["main"]}}},"compileOrder":[],"version":{"major":1,"minor":0,"patch":0,"build":18},"compilationSetting":{"TreeMaxSize":20,"FloatPrecision":1000,"removeUselessFile":true,"offuscate":true,"randomLambdaID":false,"scoreboardValue":"tbms.value","scoreboardConst":"tbms.const","scoreboardTmp":"tbms.tmp","tagsFolder":true,"forcedOffuscation":{},"libraryFolder":["./lib/1_16_5/","./lib/shared/"],"MCVersion":"1.17","ExportAsZip":false,"packformat":6,"rppackformat":7,"CompilerCoreName":"java","Authors":"","generateMAPSFile":true,"generateREADMEFile":true,"opti_FunctionTagsReplace":true,"opti_ExportComment":false,"opti_ShowException":true,"opti_ShowDebug":true,"opti_FileCleanUp":true,"advanced_debug":false,"isLibrary":false}}