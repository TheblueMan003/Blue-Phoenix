{"projectName":"mirror","datapackDirectory":null,"offuscate":false,"files":[{"name":"import","content":"import tools","index":0},{"name":"mirror_var","content":"package parkour_mirror\n\nINT Mirror_ID\nFLOAT Center_X, Center_Y, Center_Z\nBOOL AxisX, AxisY, AxisZ\nint mirror_id = 0\nbool mirrorOn = true","index":0},{"name":"mirror_display","content":"package parkour_mirror\n\nINT walkD = minecraft.custom:minecraft.walk_one_cm\nINT runD = minecraft.custom:minecraft.sprint_one_cm\nINT sneakT = minecraft.custom:minecraft.sneak_time\n\nbool isWalking\nbool isSneaking\n\nINT WalkStep\n\ndef getStat(){\n\twith(@a,true,mirror_id == Mirror_ID){\n\t\tisWalking = false\n\t\tif (walkD > 0){\n\t\t\tisWalking = true\n\t\t}\n\t\tif (runD > 0){\n\t\t\tisWalking = true\n\t\t}\n\t\t\n\t\tisSneaking = false\n\t\tif (sneakT > 0){\n\t\t\tisSneaking = true\n\t\t}\n\t}\n}\n\ndef lazy setAni(int $i){\n/data merge entity @s {ArmorItems: [{}, {}, {}, {id: \"minecraft:diamond_hoe\", Count: 1b, tag: {CustomModelData: $i}}]}\n}\n\ndef animate(){\n\tgetStat()\n\tif (!isWalking && !isSneaking){\n\t\tsetAni(1)\n\t}\n\tif (WalkStep > 0){\n\t\tisWalking = true\n\t}\n\tif (isWalking){\n\t\tWalkStep++\n\t\tWalkStep %= 8\n\t\tswitch(WalkStep){\n\t\t\t0 -> setAni(1)\n\t\t\t1 -> setAni(2)\n\t\t\t2 -> setAni(3)\n\t\t\t3 -> setAni(2)\n\t\t\t4 -> setAni(1)\n\t\t\t5 -> setAni(4)\n\t\t\t6 -> setAni(5)\n\t\t\t7 -> setAni(4)\n\t\t}\n\t}\n\tif (isSneaking){\n\t\tsetAni(6)\n\t}\n}\n\ndef clearStat(){\n\twith(@a){\n\t\trunD = 0\n\t\twalkD = 0\n\t\tsneakT = 0\n\t}\n}","index":0},{"name":"mirror","content":"package parkour_mirror\n\ndef mirrorStart(){\n\tmirror_id ++\n}\n\ndef createMirror(bool mx, bool my, bool mz, float cx, float cy, float cz){\n\tfloat x, y, z\n\tx = @s.x\n\ty = @s.y\n\tz = @s.z\n\tfloat nx, ny, nz\n\t\n\tif (mx){\n\t\tnx = cx - x + cx\n\t}\n\tif (!mx){\n\t\tnx = x\n\t}\n\t\n\tif (my){\n\t\tny = cy - y + cy\n\t\tny -= 3\n\t}\n\tif (!my){\n\t\tny = y\n\t}\n\t\n\tif (mz){\n\t\tnz = cz - z + cz\n\t}\n\tif (!mz){\n\t\tnz = z\n\t}\n\t\n\tdef smm(){\n\t\tif (my){\n\t\t/summon armor_stand ~ ~ ~ {Tags:[\"trg2\",\"__mirror__\"],NoGravity:1,Pose:{Head:[180f,180f,0f]},ArmorItems: [{}, {}, {}, {id: \"minecraft:diamond_hoe\", Count: 1b, tag: {CustomModelData: 1}}],Invisible:1}\n\t\t}\n\t\tif (!my){\n\t\t/summon armor_stand ~ ~ ~ {Tags:[\"trg2\",\"__mirror__\"],NoGravity:1,ArmorItems: [{}, {}, {}, {id: \"minecraft:diamond_hoe\", Count: 1b, tag: {CustomModelData: 1}}],Invisible:1}\n\t\t}\n\t}\n\ttools.locatedAt(nx, ny, nz, smm)\n\t\n\tMirror_ID = mirror_id\n\twith(@e[tag=trg2]){\n\t\tMirror_ID = mirror_id\n\t\tCenter_X = cx\n\t\tCenter_Y = cy\n\t\tCenter_Z = cz\n\t\tAxisX = mx\n\t\tAxisY = my\n\t\tAxisZ = mz\n\t\tuntag(@s,trg2)\n\t}\n}\nalias newMirror as createMirror\n\ndef main(){\n\tif (mirrorOn){\n\t\twith(@e[tag=__mirror__]){\n\t\t\tfloat x, y, z, u, v\n\t\t\tfloat nx, ny, nz, nu, nv\n\t\t\tmirror_id = Mirror_ID\n\t\t\twith(@a,true,mirror_id == Mirror_ID){\n\t\t\t\tx = @s.x\n\t\t\t\ty = @s.y\n\t\t\t\tz = @s.z\n\t\t\t\tu = @s.rotation_x\n\t\t\t\tv = @s.rotation_y\n\t\t\t}\n\t\t\tnu = u\n\t\t\tnv = v\n\t\t\tif (AxisX){\n\t\t\t\tnx = Center_X - x + Center_X\n\t\t\t\tnu = -u\n\t\t\t}\n\t\t\tif (!AxisX){\n\t\t\t\tnx = x\n\t\t\t}\n\t\t\t\n\t\t\tif (AxisY){\n\t\t\t\tny = Center_Y - y + Center_Y\n\t\t\t\tny -= 3\n\t\t\t\tnv = -v\n\t\t\t}\n\t\t\tif (!AxisY){\n\t\t\t\tny = y\n\t\t\t}\n\t\t\t\n\t\t\tif (AxisZ){\n\t\t\t\tnz = Center_Z - z + Center_Z\n\t\t\t\tnu = 180 - u\n\t\t\t}\n\t\t\tif (!AxisZ){\n\t\t\t\tnz = z\n\t\t\t}\n\t\t\t//tellraw(@a, nx, \"-\",ny,\"-\", nz,\"/\",x,\"-\",y,\"-\",z)\n\t\t\t@s.x = nx\n\t\t\t@s.y = ny\n\t\t\t@s.z = nz\n\t\t\t@s.rotation_x = nu\n\t\t\t@s.rotation_y = nv\n\t\t\tanimate()\n\t\t}\n\t}\n\tclearStat()\n}\n\ndef stopMirror(){\n\tmirrorOn = false\n}\n\ndef continueMirror(){\n\tmirrorOn = true\n}\n\ndef clearMirror(){\n\tkill(@e[tag=__mirror__])\n\tmirror_id = 0\n}\n\ndef clearOwned(){\n\tint id = Mirror_ID\n\twith(@e[tag=__mirror__],false,id == Mirror_ID){\n\t\tkill(@s)\n\t}\n}","index":0}],"TagsList":{"blocks":{},"functions":{}},"mcTagsList":{"blocks":{},"functions":{"load":{"values":["load"]},"tick":{"values":["main"]}}},"version":{"major":1,"minor":0,"patch":0,"build":17}}